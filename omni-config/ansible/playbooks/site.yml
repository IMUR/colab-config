---
# User-Level Ansible Master Playbook
# Purpose: Complete user environment orchestration across cluster nodes
# Scope: User $HOME directory configurations only (no sudo operations)

# ========================================================================
# USER ENVIRONMENT FOUNDATION
# ========================================================================

- name: "Phase 1: User Development Environment"
  import_playbook: user-environment.yml
  tags: [environment, foundation]

# ========================================================================
# PERSONAL SERVICES CONFIGURATION
# ========================================================================

- name: "Phase 2: Personal Services and Integrations"
  import_playbook: personal-services.yml
  tags: [services, integrations]

# ========================================================================
# COMPREHENSIVE VALIDATION
# ========================================================================

- name: "Phase 3: User Environment Validation"
  import_playbook: user-validation.yml
  tags: [validation, testing]

# ========================================================================
# DEPLOYMENT SUMMARY
# ========================================================================

- name: "User Environment Deployment Summary"
  hosts: localhost
  become: no
  gather_facts: no
  tags: [always]

  tasks:
    - name: Generate user deployment completion report
      debug:
        msg: |
          â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
          â•‘              User Environment Deployment Complete             â•‘
          â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

          ğŸ§‘â€ğŸ’» USER ENVIRONMENT CONFIGURED:
          âœ“ Development workspace structure created
          âœ“ Git configuration applied globally
          âœ“ SSH client configuration for cluster nodes
          âœ“ Node-specific development environments

          ğŸ› ï¸ PERSONAL SERVICES DEPLOYED:
          âœ“ Development tool integrations (NVM, Python, Rust)
          âœ“ Node-specific helper scripts and tools
          âœ“ User-level service management utilities
          âœ“ Workspace and project structure templates

          ğŸ”„ INTEGRATION VALIDATED:
          âœ“ System + User configuration integration tested
          âœ“ Tool detection and availability confirmed
          âœ“ Cluster connectivity and NFS access verified
          âœ“ Node-specific capabilities validated

          ğŸ“Š USER ORCHESTRATION COMPLETE:
          âœ“ Cooperator: Web development and cluster management tools
          âœ“ Projector: GPU and container development environments
          âœ“ Director: ML and data science development platforms

          ğŸ¯ NEXT STEPS:

          1. VERIFY USER ENVIRONMENT:
             for node in crtr prtr drtr; do
                 ssh $node '~/.local/bin/validate-user-environment'
             done

          2. TEST PERSONAL SERVICES:
             for node in crtr prtr drtr; do
                 ssh $node '~/.local/bin/validate-user-services'
             done

          3. RUN COMPREHENSIVE VALIDATION:
             ansible-playbook omni-config/ansible/playbooks/user-validation.yml

          4. USE NODE-SPECIFIC TOOLS:
             # On cooperator:
             ssh crtr '~/.local/bin/web-dev-server'
             ssh crtr '~/.local/bin/cluster-mgmt status'

             # On projector:
             ssh prtr '~/.local/bin/gpu-dev-setup check'
             ssh prtr '~/.local/bin/container-dev-setup setup'

             # On director:
             ssh drtr '~/.local/bin/ml-dev-setup setup'
             ssh drtr '~/.local/bin/data-science-setup setup'

          ğŸ“š USER DOCUMENTATION:
          - User workspace: ~/workspace/docs/[node]-profile.md
          - Validation reports: ~/.local/share/validation-report-*.txt
          - Development tools: ~/.local/bin/[tool]-setup scripts

          ğŸ”§ AVAILABLE USER COMMANDS:
          - validate-user-environment
          - validate-user-services
          - dev-env-status
          - [development-tool]-setup scripts
          - [node-role]-specific helper scripts

          â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
          User Environment: COMPLETE ORCHESTRATION DEPLOYED
          Strategic Hybrid: System Foundation + User Orchestration = SUCCESS
          â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•